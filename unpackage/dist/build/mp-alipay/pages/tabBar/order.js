(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/tabBar/order"],{1458:function(t,e,a){"use strict";a("883d");var i=s(a("4b41")),n=s(a("3a53"));function s(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var o=new n.default(i.default);o.$mount()},"14aa":function(t,e,a){"use strict";var i=a("42c0"),n=a.n(i);n.a},"33ff":function(t,e,a){},3632:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("8118"));function n(t){return t&&t.__esModule?t:{default:t}}var s,o=9,r={components:{unikModal:i.default},data:function(){return{imgLists:[],array:["古钱币类","书画类","珠宝玉石类","瓷器类","杂项类"],canAdd:!0,index:0,expertName:"",tabbar:!0,windowHeight:"",pic:[],title:"",wxTit:"",imageUrl:"",open:0,price:"50",content:"",actions:[],expertId:"",textAa:!0,zhuanjiaShow:!1,radioItems:[{value:"鉴定+估价",name:"2"},{value:"普通鉴定",checked:"true",name:"1"}]}},onLoad:function(){t.showShareMenu({withShareTicket:!0}),s=this,this.$ajax.get({url:"/user/listMaster?status=0&masterId=0&pageNum=0&pageSize=0"}).then(function(t){s.actions=t.data.data,console.log(s.actions)}),this.$ajax.get({url:"/fenxiang/selectShare"}).then(function(t){s.wxTit=t.data.data.title,s.imageUrl=t.data.data.url})},methods:{bindPickerChange:function(t){console.log("picker发送选择改变，携带值为",t.target.value),this.index=t.target.value,0==this.index?this.price="50":this.price="100"},switch1Change:function(t){console.log("switch1 发生 change 事件，携带值为",t.target.value),1==t.target.value?this.open=0:this.open=1,console.log(this.open)},testAs1:function(){t.hideTabBar(),this.textAa=!1,this.zhuanjiaShow=!0},showTabbar:function(){this.tabbar=!0},hideTabbar:function(){this.tabbar=!1},bindQualityChange:function(t){this.index=t.target.value},addImg:function(){var e=o-s.imgLists.length;if(console.log(s.imgLists.length),e<1)return!1;t.chooseImage({count:e,sizeType:["compressed"],success:function(e){s.imgLists=s.imgLists.concat(e.tempFilePaths),s.imgLists.length>=o&&(s.canAdd=!1),t.uploadFile({url:"https://jianbao.mumonline.net/jianbao/upload/fileUploadInTencent",filePath:e.tempFilePaths[0],name:"file",formData:{user:"test"},success:function(t){var e=JSON.parse(t.data);s.pic.push(e.data.url)}})},fail:function(){t.hideLoading()}})},removeImg:function(t){var e=t.currentTarget.id.replace("grace-items-img-","");s.imgLists.splice(e,1),s.pic.splice(e,1),s.imgLists=s.imgLists,s.imgLists.length<o&&(s.canAdd=!0)},showImgs:function(e){var a=e.currentTarget.dataset.imgurl;t.previewImage({urls:this.imgLists,current:a})},reset:function(){this.title="",this.content="",this.index=0},radioChange:function(t){var e=t.target.value;this.Ltype=t.target.value,console.log(this.Ltype);for(var a={},i=0;i<this.radioItems.length;i++)-1!==e.indexOf(this.radioItems[i].name)?a["radioItems["+i+"].checked"]=!0:a["radioItems["+i+"].checked"]=!1},show:function(){this.$refs.unikModal.show(),this.textAa=!1},confirmModal:function(){console.log("您点击了确定"),this.textAa=!0},closeZhuanjia:function(){t.showTabBar(),this.zhuanjiaShow=!1,this.textAa=!0},tapZhuanjia:function(e){t.showTabBar(),console.log(e.id),this.expertName=e.expertName,this.zhuanjiaShow=!1,this.textAa=!0,this.expertId=e.id},Launch:function(){if(""==this.content||0==this.imgLists.length)return t.showToast({title:"请完善信息",icon:"none"}),!1;var e={pic:this.pic,jianbaoType:this.array[this.index],productIntroduce:this.content,productName:this.title,userId:t.getStorageSync("userId")};this.$ajax.postJSON({url:"/JianBao/create111",data:e}).then(function(e){console.log(e),t.hideLoading(),t.showLoading({title:"加载中...",mask:!0}),console.log(e.data.data.id),s.did=e.data.data.id,s.payy(s.did)})},payy:function(e){var a=this;t.hideLoading();var i=this,n={user_id:t.getStorageSync("userId"),orderAmount:i.price,body:"鉴宝服务",id:e};this.$ajax.post({url:"/wxpay/wxproPaymentCallback",data:n}).then(function(e){a.expertName="",a.title="",a.content="";var i=e.data.data;console.log(i),t.requestPayment({provider:"wxpay",timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(e){t.showToast({title:"支付成功"}),setTimeout(function(){t.switchTab({url:"../tabBar/home"})},800)},fail:function(e){t.hideLoading(),t.showToast({title:"取消支付",icon:"none"}),a.expertId="",a.stepIndex--}})})},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:this.wxTit,path:"pages/tabBar/home",imageUrl:this.imageUrl,success:function(t){console.log("转发成功:"+JSON.stringify(t))},fail:function(t){console.log("转发失败:"+JSON.stringify(t))}}}}};e.default=r}).call(this,a("c11b")["default"])},"3ddd":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",_hid:0,_cid:0}},[a("view",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"unik-modal",attrs:{_hid:1002}},[a("view",{staticClass:"unik-modal-wrap",attrs:{_hid:1003}},[a("view",{staticClass:"unik-modal-title",attrs:{_hid:1004}},[t._v(t._s(t.modalTitle),1005)]),a("view",{staticClass:"unik-modal-content",attrs:{_hid:1006}},[t._t("default",[a("view",{attrs:{_hid:2009}})],{_hid:1007,_cid:1})],1),a("view",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],staticClass:"unik-modal-footer",attrs:{_hid:2010}},[t._ri(!!t.sureButton,2011)?a("button",{attrs:{type:"primary",_hid:2011},on:{click:function(e){t.confirm()}}},[t._v(t._s(t.sureText),2012)]):t._e(),t._ri(!!t.cancelButton,2013)?a("button",{attrs:{type:"default",_hid:2013},on:{click:function(e){t.close()}}},[t._v(t._s(t.cancelText),2014)]):t._e()],1)]),t._ri(!!t.shadow,2015)?a("view",{staticClass:"background-shadow",attrs:{_hid:2015},on:{click:function(e){t.clickMask&&t.closeModal()}}}):t._e()])])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"42c0":function(t,e,a){},4627:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{attrs:{_hid:0}},[a("view",{staticClass:"item",attrs:{_hid:1}},[a("text",{staticStyle:{width:"100rpx"},attrs:{_hid:2}},[]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"请输入藏品名称",_hid:4},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("view",{staticClass:"item",attrs:{_hid:5}},[a("text",{attrs:{_hid:6}},[]),a("view",{staticClass:"baby-input",attrs:{_hid:8}},[a("picker",{attrs:{value:t.index,range:t.array,_hid:9,_batrs:"value,range"},on:{change:t.bindPickerChange}},[a("view",{staticClass:"uni-input",attrs:{_hid:10}},[t._v(t._s(t.array[t.index]),11)])])],1)]),a("label",{staticClass:"item",attrs:{_hid:12}},[a("text",{attrs:{_hid:13}},[]),a("radio",{attrs:{value:"r1",checked:"true",_hid:15}})],1),a("view",{staticClass:"item",attrs:{_hid:16}},[a("text",{attrs:{_hid:17}},[]),a("switch",{attrs:{checked:"true",_hid:19},on:{change:t.switch1Change}})]),a("view",{staticClass:"items",attrs:{_hid:20}},[t._ri(!!t.textAa,21)?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{"placeholder-style":"color:#999999;",placeholder:"请输入藏品描述",_hid:21},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}):t._e()]),a("view",{staticClass:"imgItems",attrs:{_hid:22}},[a("view",{staticClass:"grace-file-list",attrs:{_hid:23}},[t._ri(!!t.canAdd,24)?a("view",{staticClass:"add-btn",attrs:{_hid:24},on:{tap:t.addImg}},[a("view",{attrs:{_hid:25}},[])]):t._e(),t._l(t.imgLists,function(e,i,n){var s=void 0!==n?n:i;return a("view",{key:i,staticClass:"items",attrs:{_hid:27,_fid:s,_fk:"index"}},[a("image",{attrs:{src:e,mode:"widthFix","data-imgurl":e,_hid:28,_fid:s,_batrs:"src,data-imgurl"},on:{tap:t.showImgs}}),a("view",{staticClass:"remove grace-icons icon-remove",attrs:{id:"grace-items-img-"+i,_hid:29,_fid:s,_batrs:"id"},on:{tap:t.removeImg}})])},27,t._self)],1)]),a("view",{staticClass:"btn",attrs:{_hid:30}},[a("button",{attrs:{type:"primary",_hid:31},on:{tap:t.Launch}},[])],1),a("view",{staticClass:"db",attrs:{_hid:33},on:{click:function(e){t.show()}}},[a("text",{staticClass:"agreement",attrs:{_hid:35}},[])]),a("unik-modal",{ref:"unikModal",attrs:{modalTitle:t.modalTitle,_hid:37,_batrs:"modalTitle",_cid:0},on:{confirmModal:t.confirmModal}},[a("view",{staticStyle:{"text-align":"center"},attrs:{_hid:1039}},[]),a("view",{attrs:{_hid:1041}},[a("view",{attrs:{_hid:1042}},[]),a("view",{attrs:{_hid:1044}},[]),a("view",{attrs:{_hid:1046}},[]),a("view",{attrs:{_hid:1048}},[]),a("view",{attrs:{_hid:1050}},[]),a("view",{attrs:{_hid:1052}},[])])]),a("view",{directives:[{name:"show",rawName:"v-show",value:t.zhuanjiaShow,expression:"zhuanjiaShow"}],staticClass:"choose-zhuanjia",attrs:{_hid:1054},on:{touchmove:function(e){if(!("button"in e)&&t._k(e.keyCode,"stop",void 0,e.key,void 0)&&t._k(e.keyCode,"prevent",void 0,e.key,void 0))return null}}},[a("view",{staticClass:"zhuanjia-list",attrs:{_hid:1055}},[a("view",{staticClass:"choice",attrs:{_hid:1056}},[a("text",{attrs:{_hid:1057}},[]),a("text",{staticClass:"quX",attrs:{_hid:1059},on:{tap:function(e){return"button"in e||!t._k(e.keyCode,"stop",void 0,e.key,void 0)?t.closeZhuanjia(e):null}}},[])]),a("scroll-view",{staticStyle:{height:"440rpx"},attrs:{"scroll-y":"true",_hid:1061}},t._l(t.actions,function(e,i,n){var s=void 0!==n?n:i;return a("view",{key:i,staticClass:"actions",attrs:{_hid:1062,_fid:s,_fk:"index"},on:{tap:function(a){t.tapZhuanjia(e)}}},[a("image",{attrs:{src:e.icon,mode:"true",_hid:1063,_fid:s,_batrs:"src"}}),a("view",{staticStyle:{"margin-left":"20rpx"},attrs:{_hid:1064,_fid:s}},[a("view",{staticClass:"Zjname",attrs:{_hid:1065,_fid:s}},[t._v(t._s(e.expertName),1066,s)]),a("view",{staticClass:"Zjshan",attrs:{_hid:1067,_fid:s}},[t._v("擅长:"+t._s(e.expertClumn),1068,s)])])])},1062,t._self))],1)])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"4b2f":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{showModal:!1}},props:{modalTitle:{type:String,default:""},showButton:{type:Boolean,default:!0},shadow:{type:Boolean,default:!0},clickMask:{type:Boolean,default:!0},sureText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},sureButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("cancelModal"),this.showModal=!1},confirm:function(){this.$emit("confirmModal"),this.showModal=!1},closeModal:function(){},show:function(){this.showModal=!0}}};e.default=i},"4b41":function(t,e,a){"use strict";a.r(e);var i=a("4627"),n=a("ba56");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("14aa");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},8118:function(t,e,a){"use strict";a.r(e);var i=a("3ddd"),n=a("c58d");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("d627");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"755700e6",null);e["default"]=r.exports},ba56:function(t,e,a){"use strict";a.r(e);var i=a("3632"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},c58d:function(t,e,a){"use strict";a.r(e);var i=a("4b2f"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},d627:function(t,e,a){"use strict";var i=a("33ff"),n=a.n(i);n.a}},[["1458","common/runtime","common/vendor"]]]);